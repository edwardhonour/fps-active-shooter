<div class="container-fluid">
    <div class="container-fluid"  style="background-color: #17213f;">
          <app-page-header [data]="data" (loadingChanged)="getLoading($event)"></app-page-header>
        </div>
        <!-- END OF MIST HEADER -->
        <div class="container-fluid">
            <!-- Facility Information -->
            <div class="row" style="background-color: wheat;">
                <div class="col-md-3">
                    <div>&nbsp;</div>
                </div>            
            </div>
            <div class="row" style="background-color: wheat;">
                <div class="col-md-4"><h2 style="font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">{{ data.template.TEMPLATE_NAME }}</h2></div>
            <div class="col-md-6">
                <div class="p-2">
                    <div style="font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">{{ data.building.BUILDING_NBR}} - {{ data.building.FACILITY_NAME }} </div>
                    <div style="font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">{{ data.building.ADDRESS }} </div>
                    <div style="font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">{{ data.building.CITY_NAME }} {{ data.building.STATE_ABBR }} {{ data.building.ZIPCODE }} </div>
            
                </div>
            </div>
            </div>
            <div class="row" style="background-color: wheat;">
                <div class="col-md-3">
                    <div>&nbsp;</div>
                </div>            
            </div>
    </div>
<!-- Main Section -->
<div class="container-fluid">
<div class="row pt-3" style="background-color:darkgrey">
    <div class="col-md-6">
        &nbsp;
    </div>
    <div class="col-md-6">
        <button [routerLink]="['/contacts',data['template']['TEMPLATE_ID'],data['building']['BUILDING_NBR']]" class="mb-3 btn btn-primary">Building Contact List</button>
        <button [routerLink]="['/plan-questions',data['template']['TEMPLATE_ID'],data['building']['BUILDING_NBR']]" class="mb-3 btn btn-primary">All Questions</button>
        <button [routerLink]="['/add-building-contact',data['template']['TEMPLATE_ID'],data['building']['BUILDING_NBR']]" class="mb-3 btn btn-warning">Add Contact</button>
        <button class="mb-3 btn btn-warning">Upload Photo</button>      
        <button (click)="reloadTemplate()" class="mb-3 btn btn-danger">Reload Template</button> 
    </div>
</div>
<div class="row">
    <div *ngIf="showdata=='N'"  class="col-md-3">
        <app-section-list [data]="data" [page]="page"></app-section-list>
      </div>
      <!-- -->
      <!-- RIGHT PANEL -->
      <!-- -->
      <div class="col-md-9">
    <div class="container-fluid" style="background-color: white;">
        <div *ngIf="data.current_section['HIDDEN']=='Y'" class="row mt-5 mb-1">
            <div style="font-size:32px; line-height:40px; color:darkred" class="col-md-10">
                THIS SECTION IS HIDDEN AND WILL NOT BE INCLUDED IN THE REPORT!</div>
                <div class="mt-3">
                    <button *ngIf="edit=='N'&&data.current_section['HIDDEN']=='Y'" (click)="hideSection();" class="mb-1 btn btn-primary">Reinstate Section</button>
                </div>
        </div>
        <div class="row mt-5 mb-1">
            <div style="font-size:32px; color:darkblue" class="col-md-10" [innerHTML]="data.current_section['SECTION_NAME']"></div>
        </div>
<!--        <div *ngFor="let m of data.paragraphs" class="row mt-5 mb-4" style="font-size:24px; line-height:36px;"> -->
    <div class="row mt-1 mb-1" style="font-size:24px; line-height:36px;">
        <div *ngIf="data.formData.HELP!=''" class="row mt-1 mb-1">
        <div class="col-md-1">&nbsp;</div>
                <div class="col-md-10" [innerHTML]="data.formData.HELP"></div>
                <div class="col-md-1">&nbsp;</div>
        </div>
        <div class="row">
            <div class="col-md-5">
                &nbsp;
            </div>
            <div *ngIf="edit=='N'" class="col-md-1">
                &nbsp;            
            </div>
            <div *ngIf="edit=='N'" class="col-md-6">
                <button *ngIf="edit=='N'&&data.current_section['HIDDEN']!='Y'" (click)="showEditor();" class="mb-1 btn btn-primary">Edit Section</button>
                <button *ngIf="edit=='N'&&data.current_section['HIDDEN']!='Y'" (click)="hideSection();" class="mb-1 btn btn-warning">Hide Section</button>
                <button (click)="showData()" *ngIf="showdata=='N'" class="btn btn-warning mb-1">Show Data</button>
                <button (click)="showData()" *ngIf="showdata=='Y'" class="btn btn-warning mb-1">Hide Data</button>
                <button (click)="reloadSection()" class="mb-1 btn btn-danger">Reload Section</button>

            </div>
            <div *ngIf="edit=='Y'" class="col-md-5">
                <button *ngIf="edit=='Y'" (click)="postTemplate();" type="submit" class="btn btn-primary mb-1">Save Section</button> 
                <button *ngIf="edit=='Y'" (click)="showEditor();" class="btn btn-warning mb-1">Close Editor</button>
                <button *ngIf="edit=='Y'" (click)="showData();" class="btn btn-dark mb-1">Show Data</button>
            </div>
        </div>
        <div *ngIf="edit=='N'" class="row mt-2">
                <div class="col-md-12" [innerHTML]="data.formData.HTML"></div>
        </div>
        </div>

        <div *ngIf="edit=='Y'" [formGroup]="form">


        <div class="NgxEditor__Wrapper">
            <ngx-editor-menu [editor]="editor" [toolbar]="toolbar"></ngx-editor-menu>   
            <ngx-editor
              id="editor"
              name="editor"
              [editor]="editor"
              formControlName="editorContent"
              [placeholder]="'Type here...'"
            ></ngx-editor>
          </div>
          <form>
            <div class="mb-3">
           </div>
            <button (click)="postTemplate();" type="submit" class="btn btn-primary">Save Section</button>
          </form>

        </div>          
</div>
</div>
<div *ngIf="showdata=='Y'" class="col-md-3">
    <div class="row mt-2">
<div class="col-md-10">
    <h2>Data Tags</h2>
    <p>Click to copy to clipboard.</p>
</div>
<div class="col-md-2">
    <button (click)="showData();" class="btn btn-dark">Close</button>
</div>
    </div>

<!---    <table class="table table-responsive table-striped table-bordered border-primary"> -->
    <div class="row">
    <table id="zippy" class="table table-responsive">
        <thead>
            <tr class="p-2">
                <th  class="p-2">Tag</th>
                <th  class="p-2">Name</th>                                 
            </tr>
        </thead>
        <tbody>
            <tr [ngClass]="['p-2']" *ngFor="let m of data.tags">
                <td id="t{{m.ID}}" (click)="copyText(m.TAG,m.ID);" class="p-2" style="width:100px">{{ m.TAG }}</td>
                <td (click)="copyText(m.TAG,m.ID);" class="p-2">{{ m.DATA_NAME }}</td>
            </tr>
        </tbody>
    </table>
</div>
</div>
</div>
</div>
</div>